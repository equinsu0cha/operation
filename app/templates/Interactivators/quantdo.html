<fieldset class="am-center" style="width: 350px" id="login_form">
    <div class="am-form-group am-form-icon" style="margin-bottom: 3px">
        <i class="am-icon-user am-icon-fw"></i>
        <input type="text" class="am-form-field" style="height: 40px" id="quantdo_user" placeholder="请输入用户名" value="[[login_user]]" />
    </div>
    <div class="am-form-group am-form-icon" style="margin-bottom: 3px">
        <i class="am-icon-lock am-icon-fw"></i>
        <input type="password" class="am-form-field" style="height: 40px" id="quantdo_pass" placeholder="请输入密码" value="[[login_password]]" />
    </div>
    <div ng-if="[[captcha]]">
        <input type="text" class="am-form-field" style="width: 248px; height: 40px" id="quantdo_captcha" placeholder="请输入验证码" />
        <img src="" style="width: 100px; position: relative; right: -117px; top: -40px" id="captcha_img" onclick="this.src='[[captcha_uri]]?d='+Date.parse(new Date())"></img>
    </div>
    <div style="margin-top: -35px">
        <button type="submit" class="am-btn am-btn-default" style="width: 100%" onclick="login()">登录</button>
    </div>
</fieldset>
<fieldset class="am-center" style="display: none; width: 350px" id="tradeday_picker">
    <div class="am-form-group am-form-icon am-center" style="margin-bottom: 3px">
        <i class="am-icon-calendar-check-o am-icon-fw"></i>
        <input type="text" class="am-form-field" style="height: 40px" id="quantdo_tradeday" placeholder="请输入交易日" value="" />
    </div>
    <div>
        <button type="submit" class="am-btn am-btn-default" style="width: 100%" data-am-modal-confirm data-am-modal-close>数据上场</button>
    </div>
</fieldset>
<script type="text/javascript">
    function login() {
        var user = $("#quantdo_user").val();
        var pass = $("#quantdo_pass").val();
        var captcha = $("#quantdo_captcha").val();
        $.post(
            "[[login_uri]]",
            data = {
                userName: user,
                password: pass,
                verification_code: captcha
            },
            function(response) {
                console.log(response);
                if (response.errorCode == 0) {
                    $('#login_form').hide();
                    $('#quantdo_tradeday').attr('value', response.next_trading_day);
                    $('#tradeday_picker').show();
                }
            }
        );
    }
</script>